(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/precisefabu"],{"1ccd":function(e,t,i){"use strict";(function(e){i("2899"),i("921b");o(i("66fd"));var t=o(i("b2f4"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("6e42")["createPage"])},"24af":function(e,t,i){},"3e8c":function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.modalName="bottomModal"},e.e1=function(t){e.modalName=null},e.e2=function(t){e.modalName=null},e.e3=function(t){e.modalName=null})},s=[];i.d(t,"a",function(){return o}),i.d(t,"b",function(){return s})},"6c38":function(e,t,i){"use strict";i.r(t);var o=i("b855"),s=i.n(o);for(var a in o)"default"!==a&&function(e){i.d(t,e,function(){return o[e]})}(a);t["default"]=s.a},b2f4:function(e,t,i){"use strict";i.r(t);var o=i("3e8c"),s=i("6c38");for(var a in s)"default"!==a&&function(e){i.d(t,e,function(){return s[e]})}(a);i("db2b");var n=i("2877"),c=Object(n["a"])(s["default"],o["a"],o["b"],!1,null,null,null);t["default"]=c.exports},b855:function(e,t,i){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,a,n=c(i("eeb8"));function c(e){return e&&e.__esModule?e:{default:e}}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var d=i("5771"),u=i("48ee"),l=function(){return i.e("components/dateTime/dateTime").then(i.bind(null,"fbc8"))},f=function(){return Promise.all([i.e("common/vendor"),i.e("components/mpvue-citypicker/mpvueCityPicker")]).then(i.bind(null,"6699"))},m={components:{tuiDatetime:l,mpvueCityPicker:f},data:function(){var e;return e={isSelect:0,datapic:!1,currentDate:(new Date).getTime(),timetype:1,addressType:1,areaPopshow:!1,modalName:null,textareaBValue:"",selected1:0,selected2:0,classItem:[],chooceItem:[],items:[],text:'<view class="text-red">年检代办</view>',imgList:[],address:"",carInfoList:[],switched:!1,form:{formId:"",ordersn:"",car_id:0,province:"",city:"",district:"",province_code:"",city_code:"",district_code:"110101",content:"",longitude:"",latitude:"",address:"",link_man:"",link_mobile:"",obj_type:"",obj_type2:"",obj_type3:"",image:"",pickup_service:0,car_get_longitude:"",car_get_latitude:"",car_get_time:"",car_get_address:"",car_back_longitude:"",car_back_latitude:"",car_back_time:"",car_back_address:""},loading:!0,areaList:{},type:0,isupdate:!1,isClick:!1,mulLinkageTwoPicker:n.default,cityPickerValueDefault:[0,0,1],themeColor:"#007AFF",addressResult:{label:"请选择",value:[0,0,0],cityCode:"110101"}},r(e,"type",1),r(e,"startYear",1980),r(e,"endYear",2030),r(e,"cancelColor","#888"),r(e,"color","#5677fc"),r(e,"setDateTime",""),r(e,"result",""),e},mounted:function(){},onShow:function(){},onLoad:function(t){s=this,s.type=t.type,0==t.type?(s.isupdate=!1,this.bidCategoryList1(!1),e.getLocation({type:"wgs84",altitude:!0,geocode:!0,success:function(e){s.form.latitude=e.latitude,s.form.longitude=e.longitude,s.$api.get("https://api.map.baidu.com/reverse_geocoding/v3/?ak=Ulna6HAk7FsVuGeG4aOsV1wWZtxcosrC&output=json&coordtype=wgs84ll&location="+e.latitude+","+e.longitude,function(e){s.form.address=e.result.formatted_address,s.form.province=e.result.addressComponent.province,s.form.city=e.result.addressComponent.city,s.form.district=e.result.addressComponent.district,s.form.district_code=e.result.addressComponent.adcode})}})):(s.isupdate=!0,s.$api.postWithData(s.api.taskDetail,{task_id:t.task_id},function(e){s.form=e.data;var t=s.form.image.split(",");if(s.onEditorReady(),""!=t[0])for(var i=0;i<t.length;i++)s.imgList.push(t[i]);0==s.form.pickup_service?s.switched=!1:s.switched=!0,s.bidCategoryList1(!0)})),this.initCOS(),this.getCarNew()},methods:{showMulLinkageThreePicker:function(){this.$refs.mpvueCityPicker.show()},hideMulLinkageThreePicker:function(){this.$refs.mpvueCityPicker.pickerCancel()},onEditorReady:function(){var t=this;e.createSelectorQuery().select("#editor").context(function(e){t.editorCtx=e.context,t.editorCtx.insertText({text:s.form.content})}).exec()},initCOS:function(){a=new d({Bucket:s.api.Bucket,Region:s.api.Region,getAuthorization:function(e,t){s.$api.postWithData(s.api.qcloud_key,{bucket:e.Bucket,region:e.Region},function(e){var i=e.credentials;t({TmpSecretId:i.tmpSecretId,TmpSecretKey:i.tmpSecretKey,XCosSecurityToken:i.sessionToken,ExpiredTime:e.expiredTime})})}})},getCarNew:function(){this.$api.post(this.api.getCarNew,function(e){null==e.data?s.$api.msg("暂未录入车辆信息"):s.carInfoList=e.data})},bidCategoryList1:function(e){this.$api.postWithData(this.api.bidCategoryList,{pid:0,has_child:1},function(t){null!=t.data?(s.classItem=t.data,e?s.isClick?s.bidCategoryList2(e,id):s.bidCategoryList2(e,s.form.obj_type):(s.form.obj_type=s.classItem[0].id,s.bidCategoryList2(e,s.classItem[0].id))):s.$api.msg(t.msg)})},bidCategoryList2:function(e,t){s.chooceItem=[],s.items=[],this.$api.postWithData(this.api.bidCategoryList,{pid:t,has_child:1},function(i){null!=i.data?(s.chooceItem=i.data,e?s.isClick?(s.form.obj_type2=s.chooceItem[0].id,s.bidCategoryList3(e,t)):s.bidCategoryList3(e,s.form.obj_type2):(s.form.obj_type2=s.chooceItem[0].id,s.bidCategoryList3(e,s.chooceItem[0].id))):s.$api.msg(i.msg)})},bidCategoryList3:function(e,t){s.items=[],this.$api.postWithData(this.api.bidCategoryList,{pid:t,has_child:0},function(t){if(null!=t.data){if(s.items=t.data,e)for(var i=s.items,o=s.form.obj_type3,a=0,n=i.length;a<n;++a){var c=i[a];o.indexOf(c.id)>=0?s.$set(c,"checked",!0):s.$set(c,"checked",!1)}}else s.$api.msg(t.msg)})},show:function(e){this.timetype=e,this.cancelColor="#888",this.color="#5677fc",this.startYear=1980,this.endYear=2030,this.type=1,this.setDateTime=u.formatDate((new Date).getTime(),"YY-MM-DD hh-mm"),this.$refs.dateTime.show()},change:function(e){console.log(o(e," at pages\\index\\precisefabu.vue:513"));e.result;1==this.timetype?this.form.car_get_time=e.result:this.form.car_back_time=e.result},openPopTime:function(e){this.currentDate=new Date,this.timetype=e,this.datapic=!0},switchChooce:function(e){this.switched=e.detail.value,this.switched?this.form.pickup_service=1:this.form.pickup_service=0},onConfirm3:function(e){console.log(o(e," at pages\\index\\precisefabu.vue:536"));var t=e.label.split("-");this.form.province=t[0],this.form.city=t[1],this.form.district=t[2],this.form.district_code=e.cityCode,console.log(o(this.form.province," at pages\\index\\precisefabu.vue:544"))},checkboxChange:function(e){for(var t=this.items,i=e.detail.value,a="",n=0;n<i.length;n++)a+=i[n]+",";a.length>0&&(a=a.substr(0,a.length-1)),i=i+","+s.form.obj_type3,console.log(o(i," at pages\\index\\precisefabu.vue:559"));n=0;for(var c=t.length;n<c;++n){var r=t[n];i.indexOf(r.id)>=0?this.$set(r,"checked",!0):this.$set(r,"checked",!1)}this.form.obj_type3=a},submitForm:function(t){var i=s.form.content,a=i.replace("\n","");if(this.form.content=a,console.log(o(t.detail.formId," at pages\\index\\precisefabu.vue:575")),this.form.formId=t.detail.formId,""!=this.form.content)if(""!=this.form.address)if(""!=this.form.link_man)if(""!=this.form.link_mobile){for(var n="",c=0;c<this.imgList.length;c++)c<this.imgList.length-1?n+=this.imgList[c]+",":n+=this.imgList[c];this.form.image=n,this.$api.postWithData(this.api.publishbid,this.form,function(t){console.log(o(t," at pages\\index\\precisefabu.vue:605")),1==t.code&&(s.$api.msg(t.msg),setTimeout(function(){"home"==s.from?e.redirectTo({url:"../mine/publishbid"}):(s.$eventBus.$emit("myTaskList"),e.navigateBack())},3e3))})}else this.$api.msg("请填写联系电话");else this.$api.msg("请填写联系人");else this.$api.msg("请选择地址");else this.$api.msg("请填写描述内容")},checkClass1:function(e){this.isClick=!0,this.form.obj_type=this.classItem[e].id,this.bidCategoryList2(s.isupdate,this.classItem[e].id)},checkClass2:function(e){this.isClick=!0,this.form.obj_type2=this.chooceItem[e].id,this.bidCategoryList3(s.isupdate,this.chooceItem[e].id)},selected:function(e){this.isSelect=e,this.form.car_id=this.carInfoList[e].id},textareaAInput:function(e){this.form.content=e.detail.text},getNowAddress:function(){e.chooseLocation({success:function(e){s.form.longitude=e.longitude,s.form.latitude=e.latitude,s.form.address=e.address}})},ViewImage:function(t){e.previewImage({urls:this.imgList,current:t.currentTarget.dataset.url})},DelImg:function(t){var i=this;e.showModal({title:"温馨提示！",content:"确定要删除吗？",cancelText:"取消",confirmText:"确定",success:function(e){e.confirm&&i.imgList.splice(t.currentTarget.dataset.index,1)}})},doBefore:function(){console.log(o("doBefore"," at pages\\index\\precisefabu.vue:670"))},clk:function(t){var i=e.getSystemInfoSync(),o=i.windowWidth;i.windowHeight;this.$refs.avatar.fChooseImg(t,{selWidth:o-50+"px",selHeight:o-50+"px",expWidth:"800px",expHeight:"800px",inner:"true",canRotate:"false"})},doUpload:function(e){console.log(o(e.path," at pages\\index\\precisefabu.vue:687"));var t=e.path,i=new Date,n=i.getFullYear()+"",c=i.getMonth()+1+"",r=i.getDate()+"",d=n+c+r,u=i.getTime()+".png",l="uploads/"+d+"/"+u;a.postObject({Bucket:s.api.Bucket,Region:s.api.Region,Key:l,FilePath:t,onProgress:function(e){console.log(o(JSON.stringify(e)," at pages\\index\\precisefabu.vue:702"))}},function(e,t){console.log(o(e||t," at pages\\index\\precisefabu.vue:705")),s.imgList.push(s.api.UPLOAD_HOST+l)})},setAdd:function(t){e.chooseLocation({success:function(e){1==t?(s.form.car_get_latitude=e.latitude,s.form.car_get_longitude=e.longitude,s.form.car_get_address=e.address):2==t?(s.form.car_back_latitude=e.latitude,s.form.car_back_longitude=e.longitude,s.form.car_back_address=e.address):3==t&&(s.form.latitude=e.latitude,s.form.longitude=e.longitude,s.form.address=e.address)}})}}};t.default=m}).call(this,i("6e42")["default"],i("0de9")["default"])},db2b:function(e,t,i){"use strict";var o=i("24af"),s=i.n(o);s.a}},[["1ccd","common/runtime","common/vendor"]]]);