(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/home"],{1350:function(t,e,a){"use strict";a.r(e);var o=a("17d1"),n=a.n(o);for(var i in o)"default"!==i&&function(t){a.d(e,t,function(){return o[t]})}(i);e["default"]=n.a},"17d1":function(t,e,a){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=s(a("a34a"));s(a("66fd"));function s(t){return t&&t.__esModule?t:{default:t}}function r(t,e,a,o,n,i,s){try{var r=t[i](s),u=r.value}catch(c){return void a(c)}r.done?e(u):Promise.resolve(u).then(o,n)}function u(t){return function(){var e=this,a=arguments;return new Promise(function(o,n){var i=t.apply(e,a);function s(t){r(i,o,n,s,u,"next",t)}function u(t){r(i,o,n,s,u,"throw",t)}s(void 0)})}}var c={name:"basics",data:function(){return{modalName:!1,myList:[],isLoad:!1,cardCur:0,swiperList:[],getTaskList:[],dotStyle:!1,towerStart:0,direction:"",form:{sort_1:0,sort_2:0,page:1,size:5},city:"定位中",latitude:"",longitude:"",seller:!1}},filters:{km:function(t){return null!=t?(Number(t)/1e3).toFixed(2)+"km":""}},methods:{getUserInfo:function(e){console.log(t(e," at pages\\home\\home.vue:141")),o.login({provider:"weixin",success:function(t){if(void 0==e.detail.iv)return o.showToast({icon:"none",mask:!0,title:"授权失败！"}),void(n.modalName=!0);var a={iv:e.detail.iv,code:t.code,encryptedData:e.detail.encryptedData};n.$api.postWithData(n.api.register,a,function(t){0==t.code?(n.modalName=!0,o.showToast({icon:"none",mask:!0,title:"注册失败"})):(n.modalName=!1,o.setStorageSync("unionid",t.data.member.unionid),o.setStorageSync("openid",t.data.member.openid),o.setStorageSync("seller_id",t.data.seller_manager.seller_id),o.setStorageSync("uid",t.data.member.uid),o.setStorageSync("nickname",t.data.member.nickname),o.setStorageSync("headimg",t.data.member.headimg),o.setStorageSync("isLogin",!0))})}})},sendRequest:function(){this.$http.get(this.api.getAreaData).then(function(t){o.showToast({title:"请求成功",icon:"success",mask:!0})}).catch(function(e){console.log(t("request fail",e," at pages\\home\\home.vue:180"))})},sendRequest1:function(){var t=u(i.default.mark(function t(){return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.post(this.api.getAreaData);case 2:t.sent,o.showToast({title:"请求成功",icon:"success",mask:!0});case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),cardSwiper:function(t){this.cardCur=t.detail.current},cutTab:function(){o.switchTab({url:"../market/home"})},more:function(){this.$api.post(this.api.getCarNew,function(t){-1==t?n.modalName=!0:o.navigateTo({url:"/pages/market/more"})})},navigateTo:function(t,e){this.$api.post(this.api.getCarNew,function(a){if(-1==a)n.modalName=!0;else{var i=o.getStorageSync("uid");n.$api.post(n.api.isSeller,function(a){2==a.code?n.seller=!0:n.seller=!1,e.uid==i||n.seller?o.navigateTo({url:t}):n.$api.msg("仅限发布者和商家可查看详情")})}})},getLocation:function(){this.isLoad=!0,console.log(t(this.long," at pages\\home\\home.vue:239")),console.log(t(this.lat," at pages\\home\\home.vue:240"));var e={sort_1:0,sort_2:0,page:1,size:5,longitude:this.long,latitude:this.lat};this.$api.postWithData(this.api.getTaskList,e,function(t){n.isLoad=!1,n.getTaskList=t.data;for(var e=0;e<n.getTaskList.length;e++)n.getTaskList[e].image=""==n.getTaskList[e].image?"../../static/logo.jpg":n.getTaskList[e].image.split(",")[0]}),0!=this.lat&&this.$api.get("https://api.map.baidu.com/reverse_geocoding/v3/?ak=Ulna6HAk7FsVuGeG4aOsV1wWZtxcosrC&output=json&coordtype=wgs84ll&location="+this.lat+","+this.long,function(t){n.city=t.result.addressComponent.city})}},onTabItemTap:function(e){console.log(t(e," at pages\\home\\home.vue:270"))},mounted:function(){console.log(t(this.$api.isLogin," at pages\\home\\home.vue:273")),n=this,this.$api.post(this.api.adlist,function(e){console.log(t(e," at pages\\home\\home.vue:277")),n.swiperList=e.data}),this.getLocation(),this.$eventBus.$on("initData",function(t){n.getLocation()}),this.$eventBus.$on("register",function(t){n.modalName=!0}),o.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#ff0000"})},onLoad:function(){}};e.default=c}).call(this,a("0de9")["default"],a("6e42")["default"])},"64cf":function(t,e,a){},"6f8b":function(t,e,a){"use strict";(function(t){a("2899"),a("921b");o(a("66fd"));var e=o(a("ec20"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},"8b51":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=(t._self._c,t.__map(t.getTaskList,function(e,a){var o=t._f("km")(null==e.distance?0:e.distance);return{$orig:t.__get_orig(e),f0:o}}));t.$mp.data=Object.assign({},{$root:{l0:a}})},n=[];a.d(e,"a",function(){return o}),a.d(e,"b",function(){return n})},ec20:function(t,e,a){"use strict";a.r(e);var o=a("8b51"),n=a("1350");for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);a("fe9e");var s=a("2877"),r=Object(s["a"])(n["default"],o["a"],o["b"],!1,null,null,null);e["default"]=r.exports},fe9e:function(t,e,a){"use strict";var o=a("64cf"),n=a.n(o);n.a}},[["6f8b","common/runtime","common/vendor"]]]);