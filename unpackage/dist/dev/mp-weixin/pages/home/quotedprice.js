(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/home/quotedprice"],{220:
/*!****************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/App/cscb-h5-app/main.js?{"page":"pages%2Fhome%2Fquotedprice"} ***!
  \****************************************************************************************************/
/*! no static exports found */function(t,i,e){"use strict";(function(t){e(/*! uni-pages */4),e(/*! @dcloudio/uni-stat */5);i(e(/*! vue */2));function i(t){return t&&t.__esModule?t:{default:t}}t(i(e(/*! ./pages/home/quotedprice.vue */221)).default)}).call(this,e(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).createPage)},221:
/*!*********************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/App/cscb-h5-app/pages/home/quotedprice.vue ***!
  \*********************************************************************************/
/*! no static exports found */function(t,i,e){"use strict";e.r(i);var s=e(/*! ./quotedprice.vue?vue&type=template&id=6153ed9b& */222),o=e(/*! ./quotedprice.vue?vue&type=script&lang=js& */224);for(var n in o)"default"!==n&&function(t){e.d(i,t,function(){return o[t]})}(n);var a=e(/*! ../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js */14),r=Object(a.default)(o.default,s.render,s.staticRenderFns,!1,null,null,null);r.options.__file="Desktop/App/cscb-h5-app/pages/home/quotedprice.vue",i.default=r.exports},222:
/*!****************************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/App/cscb-h5-app/pages/home/quotedprice.vue?vue&type=template&id=6153ed9b& ***!
  \****************************************************************************************************************/
/*! exports provided: render, staticRenderFns */function(t,i,e){"use strict";e.r(i);var s=e(/*! -!../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./quotedprice.vue?vue&type=template&id=6153ed9b& */223);e.d(i,"render",function(){return s.render}),e.d(i,"staticRenderFns",function(){return s.staticRenderFns})},223:
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Administrator/Desktop/App/cscb-h5-app/pages/home/quotedprice.vue?vue&type=template&id=6153ed9b& ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */function(t,i,e){"use strict";e.r(i),e.d(i,"render",function(){return s}),e.d(i,"staticRenderFns",function(){return o});var s=function(){var t=this.$createElement;this._self._c},o=[];s._withStripped=!0},224:
/*!**********************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/App/cscb-h5-app/pages/home/quotedprice.vue?vue&type=script&lang=js& ***!
  \**********************************************************************************************************/
/*! no static exports found */function(t,i,e){"use strict";e.r(i);var s=e(/*! -!../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./quotedprice.vue?vue&type=script&lang=js& */225),o=e.n(s);for(var n in s)"default"!==n&&function(t){e.d(i,t,function(){return s[t]})}(n);i.default=o.a},225:
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Administrator/Desktop/App/cscb-h5-app/pages/home/quotedprice.vue?vue&type=script&lang=js& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,i,e){"use strict";(function(t){var s,o;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e(/*! ../../utils/cos-wx-sdk-v5 */57),a={data:function(){return{imgList:[],value:"",list:{},wxgs:0,modalName:null,orderInfo:{},form:{formId:"",task_id:0,price:0,items:[{name:"默认项目(点击可修改)",wxgs:"",pjjg:"",pjpp:"",wxsj:"",zbsj:""}],files:"",desc:""}}},updated:function(){var t=0;this.form.items.forEach(function(i,e){t+=parseFloat(""==i.wxgs?0:i.wxgs)+parseFloat(""==i.pjjg?0:i.pjjg)}),this.form.price=this.toDecimal(t)},onLoad:function(t){(s=this).initCOS(),this.form.task_id=t.task_id,0==t.type?(this.taskLogDetail(),this.taskDetail()):this.taskDetail()},methods:{clk:function(i){var e=t.getSystemInfoSync(),s=e.windowWidth;e.windowHeight;this.$refs.avatar.fChooseImg(i,{selWidth:s-50+"px",selHeight:s-50+"px",expWidth:"800px",expHeight:"800px",inner:"true",canRotate:"false"})},doBefore:function(){console.log("doBefore")},doUpload:function(t){console.log(t.path);var i=t.path,e=new Date,n="uploads/"+(e.getFullYear()+""+(e.getMonth()+1+"")+(e.getDate()+""))+"/"+(e.getTime()+".png");o.postObject({Bucket:s.api.Bucket,Region:s.api.Region,Key:n,FilePath:i,onProgress:function(t){console.log(JSON.stringify(t))}},function(t,i){console.log(t||i),s.imgList.push(s.api.UPLOAD_HOST+n)})},ViewImage:function(i){t.previewImage({urls:this.imgList,current:i.currentTarget.dataset.url})},DelImg:function(i){var e=this;t.showModal({title:"温馨提示！",content:"确定要删除吗？",cancelText:"取消",confirmText:"确定",success:function(t){t.confirm&&e.imgList.splice(i.currentTarget.dataset.index,1)}})},initCOS:function(){o=new n({Bucket:s.api.Bucket,Region:s.api.Region,getAuthorization:function(t,i){console.log(t),s.$api.postWithData(s.api.qcloud_key,{bucket:t.Bucket,region:t.Region},function(t){var e=t.credentials;i({TmpSecretId:e.tmpSecretId,TmpSecretKey:e.tmpSecretKey,XCosSecurityToken:e.sessionToken,ExpiredTime:t.expiredTime})})}})},taskLogDetail:function(){this.$api.postWithData(this.api.taskLogDetail,{task_id:this.form.task_id},function(t){if(s.form.desc=t.data.desc,s.form.items=JSON.parse(t.data.items),null!=t.data.files){var i=t.data.files.split(",");if(""!=i[0]&&null!=i[0])for(var e=0;e<i.length;e++)s.imgList.push(i[e])}})},taskDetail:function(){this.$api.postWithData(this.api.taskDetail,{task_id:this.form.task_id},function(i){if(0==i.code)return s.$api.msg("当前挂单已关闭或不存在"),void setTimeout(function(){t.navigateBack()},2e3);s.orderInfo=i.data})},showModal:function(t){this.modalName=t.currentTarget.dataset.target},hideModal:function(t){this.modalName=null},openDialog:function(){this.modalName="DialogModal1"},deleteitem:function(t){var i=0;t>-1&&this.form.items.splice(t,1),this.form.items.forEach(function(t,e){i+=parseFloat(""==t.wxgs?0:t.wxgs)+parseFloat(""==t.pjjg?0:t.pjjg)}),this.form.price=this.toDecimal(i)},confirm:function(){if(""!=this.value){var t=this.value;this.list={name:t,wxgs:"",pjjg:"",pjpp:"",wxsj:"",zbsj:""},this.form.items.push(this.list),this.value="",this.modalName=null}else this.$api.msg("请填写项目名称")},submit:function(i){if(console.log(i.detail.formId),this.form.formId=i.detail.formId,257==this.orderInfo.obj_type){for(var e=0;e<this.form.items.length;e++){if(""==this.form.items[e].name)return void this.$api.msg("第"+(e+1)+"个项目名称不能为空");if(""==this.form.items[e].pjjg)return void this.$api.msg("第"+(e+1)+"个保险价格不能为空");if(""==this.form.items[e].pjpp)return void this.$api.msg("第"+(e+1)+"个保险公司不能为空");if(""==this.form.items[e].zbsj)return void this.$api.msg("第"+(e+1)+"个保险有限期不能为空")}for(var o="",n=0;n<this.imgList.length;n++)n<this.imgList.length-1?o+=this.imgList[n]+",":o+=this.imgList[n];this.form.files=o}else for(var a=0;a<this.form.items.length;a++){if(""==this.form.items[a].name)return void this.$api.msg("第"+(a+1)+"个项目名称不能为空");if(""==this.form.items[a].wxgs)return void this.$api.msg("第"+(a+1)+"个维修工时不能为空");if(""==this.form.items[a].pjjg)return void this.$api.msg("第"+(a+1)+"个材料价格不能为空");if(""==this.form.items[a].pjpp)return void this.$api.msg("第"+(a+1)+"个材料品牌不能为空");if(""==this.form.items[a].wxsj)return void this.$api.msg("第"+(a+1)+"个维修时间不能为空");if(""==this.form.items[a].zbsj)return void this.$api.msg("第"+(a+1)+"个质保时间不能为空")}""!=this.form.desc?(console.log(this.form),this.$api.postWithData(this.api.bidding,{task_id:this.form.task_id,items:JSON.stringify(this.form.items),price:this.form.price,files:this.form.files,desc:this.form.desc},function(i){1==i.code&&(s.$api.msg(i.msg),t.reLaunch({url:"../index/index"}))})):this.$api.msg("维修建议不能为空")},toDecimal:function(t){var i=parseFloat(t);if(!isNaN(i))return i=Math.round(100*t)/100}}};i.default=a}).call(this,e(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).default)}},[[220,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/home/quotedprice.js.map