(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/order_detail"],{"0edb":function(e,t,n){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("a34a"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,a,i,r,o){try{var s=e[r](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(a,i)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var r=e.apply(t,n);function s(e){o(r,a,i,s,u,"next",e)}function u(e){o(r,a,i,s,u,"throw",e)}s(void 0)})}}var u={data:function(){return{title:"request-payment",loading:!1,price:1,providerList:[]}},methods:{fenzhuangH5pay:function(){wx.chooseWXPay({timestamp:1414561699,nonceStr:"5K8264ILTKCH16CQ2502SI8ZNMTM67VS",package:"prepay_id=123456789",signType:"MD5",paySign:"C380BEC2BFD727A4B6845133519F3AD6",success:function(e){}})},isWechat:function(){var e=window.navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/micromessenger/i)},jsApiCall:function(e,t,n){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:"wx0f540572b7afe6af",timeStamp:"",nonceStr:"",package:"prepay_id=",signType:"",paySign:""},function(e){var a=e.err_msg?e.err_msg:e.errMsg;switch(a){case"get_brand_wcpay_request:ok":t&&t(e);break;default:WeixinJSBridge.log("支付失败!"+a+",请返回重试."),n&&n({msg:a});break}})},payment:function(e,t,n){this.isWechat()&&("undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",this.jsApiCall,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",this.jsApiCall),document.attachEvent("onWeixinJSBridgeReady",this.jsApiCall)):this.jsApiCall(e,t,n))},PayH5:function(){this.payment()},requestPayment:function(){var t=s(i.default.mark(function t(n,r){var o,s=this;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.providerList[r].loading=!0,t.next=3,this.getOrderInfo(n.id);case 3:if(o=t.sent,console.log(e("得到订单信息",o," at pages\\mine\\order_detail.vue:157")),200===o.statusCode){t.next=9;break}return console.log(e("获得订单信息失败",o," at pages\\mine\\order_detail.vue:159")),a.showModal({content:"获得订单信息失败",showCancel:!1}),t.abrupt("return");case 9:a.requestPayment({provider:n.id,orderInfo:o.data,success:function(t){console.log(e("success",t," at pages\\mine\\order_detail.vue:171")),a.showToast({title:"感谢您的赞助!"})},fail:function(t){console.log(e("fail",t," at pages\\mine\\order_detail.vue:177")),a.showModal({content:"支付失败,原因为: "+t.errMsg,showCancel:!1})},complete:function(){s.providerList[r].loading=!1}});case 10:case"end":return t.stop()}},t,this)}));function n(e,n){return t.apply(this,arguments)}return n}(),getOrderInfo:function(t){var n="";n=plus.runtime.appid,console.log(e(n," at pages\\mine\\order_detail.vue:192"));var i="https://demo.dcloud.net.cn/payment/?payid="+t+"&appid="+n+"&total="+this.price;return new Promise(function(e){a.request({url:i,success:function(t){e(t)},fail:function(t){e(t)}})})}},onLoad:function(){var t=this;a.getProvider({service:"payment",success:function(n){console.log(e("payment success:"+JSON.stringify(n)," at pages\\mine\\order_detail.vue:213"));var a=[];n.provider.map(function(e){switch(e){case"alipay":a.push({name:"支付宝",id:e,loading:!1});break;case"wxpay":a.push({name:"微信",id:e,loading:!1});break;default:break}}),t.providerList=a},fail:function(t){console.log(e("获取支付通道失败：",t," at pages\\mine\\order_detail.vue:238"))}})}};t.default=u}).call(this,n("0de9")["default"],n("6e42")["default"])},"15f9":function(e,t,n){"use strict";n.r(t);var a=n("80a2"),i=n("d02b");for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);n("f9cb");var o=n("2877"),s=Object(o["a"])(i["default"],a["a"],a["b"],!1,null,null,null);t["default"]=s.exports},"19f6":function(e,t,n){},"80a2":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i})},cdde:function(e,t,n){"use strict";(function(e){n("2899"),n("921b");a(n("66fd"));var t=a(n("15f9"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},d02b:function(e,t,n){"use strict";n.r(t);var a=n("0edb"),i=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);t["default"]=i.a},f9cb:function(e,t,n){"use strict";var a=n("19f6"),i=n.n(a);i.a}},[["cdde","common/runtime","common/vendor"]]]);